(this["webpackJsonpyoutube-ibm"]=this["webpackJsonpyoutube-ibm"]||[]).push([[0],{38:function(e,t,s){},39:function(e,t,s){},68:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),i=s(32),a=s.n(i),r=(s(38),s(39),s(8)),o=s(2),l=s(0);function u(){return Object(l.jsx)("header",{className:"bg-gray-200 flex flex-col justify-start items-start md:flex-row ",children:Object(l.jsx)(r.b,{to:"/",children:Object(l.jsx)("div",{className:"text-center m-2 p-2",children:" Logo"})})})}var d=s(10),h=s(14),j=s.n(h);function m(e){var t=e.setQuery,s=Object(n.useState)(""),c=Object(d.a)(s,2),i=c[0],a=c[1],r=Object(n.useState)(!1),o=Object(d.a)(r,2),u=o[0],h=o[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"text-4xl w-11/12 mx-auto font-semibold mt-2 text-center",children:"Find your youtube video!"}),Object(l.jsxs)("div",{className:"max-w-xl w-10/12 md:w-6/12 flex mx-auto my-3 border-2",children:[Object(l.jsx)("input",{id:"q",maxLength:"20",name:"query",value:i,onChange:function(e){!function(e){"query"===e.target.name&&a(e.target.value),i.length>19&&e.preventDefault()}(e)},className:"w-11/12 h-8 p-2 rounded-sm focus:outline-none focus:ring focus:border-red-300  w-4/5",type:"text"}),Object(l.jsx)("div",{onClick:function(){if(function(e){return!e.match(/[^0-9A-Za-z, ]/)&&e.length>0?(h(!1),document.getElementById("q").classList.remove("err"),a(""),!0):(document.getElementById("q").classList.add("err"),h(!0),!1)}(i)){t(i);try{j.a.post("/searches",{keyword:i})}catch(e){}}},className:"flex items-center justify-center rounded-sm h-8 bg-blue-300 p-2 text-white font-semibold cursor-pointer",children:"Go"})]}),u&&Object(l.jsx)("p",{className:"text-center text-red-500 mt-3",children:"Please check your input"})]})}var p=s(4),b=s.n(p),x=s(11),v=s(15),f=s(16),O=s(19),g=s(18),y=s(17);function w(e){var t=e.video,s=function(e){var t=Date.now(),s=Math.round((t-e)/1e3);if(s<=15)return"Just now";if(s<=59)return s+"s ago";var n=Math.floor(s/60);if(n<=59)return n+"min ago";var c=Math.floor(n/60);if(c<=23)return c+"h ago";var i=Math.floor(c/24);if(i<=7)return i+"d ago";var a=Math.floor(i/7);if(a<=4)return a+"w ago";var r=Math.floor(i/30);return r<=11?r+"mth ago":Math.floor(i/365.25)+"y ago"}(new Date(t.snippet.publishedAt));return Object(l.jsx)(r.b,{onClick:function(){window.scrollTo(0,0),j.a.post("/clicks",{videoTitle:t.snippet.title,videoChanel:t.snippet.channelTitle,videoId:t.id.videoId})},to:{pathname:"/video/".concat(t.id.videoId),state:{video:t}},children:Object(l.jsxs)("div",{className:"single-card-box mx-auto  w-9/12 md:w-full max-w-sm cursor-pointer",children:[Object(l.jsx)("img",{className:"w-full h-10/12 my-2",src:t.snippet.thumbnails.high.url,alt:""}),Object(l.jsxs)("div",{className:"p-2",children:[Object(l.jsx)("p",{className:"text-center my-3",children:t.snippet.title}),Object(l.jsxs)("p",{className:"text-center text-gray-300 mb-2",children:[t.snippet.channelTitle,"  \xb7 ",s," "]})]})]})})}var N=function(e){Object(O.a)(s,e);var t=Object(g.a)(s);function s(){var e;return Object(v.a)(this,s),(e=t.call(this)).state={items:Array.from({length:8}),videos:[],query:"",limit:8},e.fetchMoreData=function(){setTimeout((function(){e.getSearched(),e.setState({items:e.state.items.concat(Array.from({length:8}))})}),1500)},e}return Object(f.a)(s,[{key:"componentDidMount",value:function(){this.getSearched()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.getSearched()}},{key:"getSearched",value:function(){var e=Object(x.a)(b.a.mark((function e(){var t,s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"AIzaSyB3G7-i8z2NTRw0zVzNx0_79vDqIuHXwc0",t="https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key=".concat("AIzaSyB3G7-i8z2NTRw0zVzNx0_79vDqIuHXwc0","&maxResults=").concat(this.state.limit,"&&q=").concat(this.props.query,"&pageToken=CBQQAA"),e.next=5,fetch(t);case 5:return s=e.sent,e.next=8,s.json();case 8:return n=e.sent,this.setState({videos:n.items,limit:this.state.limit+8}),e.abrupt("return",n.items);case 13:e.prev=13,e.t0=e.catch(0),console.log("Failed to fetch",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(l.jsx)("div",{children:Object(l.jsx)(y.a,{className:"ifs w-11/12 m-auto mt-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.limit<50,loader:Object(l.jsx)("h4",{children:"Loading..."}),children:this.state.videos.map((function(e,t){return Object(l.jsx)(w,{video:e},t)}))})})}}]),s}(c.a.Component);function S(e){var t=Object(n.useState)(!1),s=Object(d.a)(t,2),c=(s[0],s[1],Object(n.useState)(!1)),i=Object(d.a)(c,2),a=i[0],r=i[1],o=Object(n.useState)(!1),u=Object(d.a)(o,2);u[0],u[1];return Object(n.useEffect)((function(){e.location.state&&r(e.location.state.activeQuery)}),[a]),Object(l.jsxs)("div",{children:[Object(l.jsx)(m,{setQuery:r}),a&&Object(l.jsx)(N,{query:a})]})}function k(e){var t=e.video,s=Object(n.useState)(!1),c=Object(d.a)(s,2),i=c[0],a=c[1];var r=new Date(t.snippet.publishedAt).getFullYear();return Object(l.jsxs)("div",{className:"video-about mb-4",children:[Object(l.jsx)("p",{className:"mt-3 text-2xl",children:t.snippet.title}),Object(l.jsxs)("p",{children:["Published at: ",Object(l.jsx)("span",{className:"font-semibold",children:r})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:t.snippet.channelTitle}),Object(l.jsx)("hr",{}),Object(l.jsx)("span",{onClick:function(){a(!i)},id:"see-more",className:"text-blue-300 cursor-pointer font-semibold hover:text-blue-500",children:i?"See Less":"See Description"}),Object(l.jsx)("p",{style:i?{display:"block"}:{display:"none"},id:"description",children:t.snippet.description})]})}function z(e){var t=e.video,s=t.id.videoId;return Object(l.jsxs)("div",{className:"w-full md:w-w-8/12",children:[Object(l.jsx)("iframe",{width:"420",height:"315",src:"https://www.youtube.com/embed/".concat(s)}),Object(l.jsx)(k,{video:t})]})}var A=function(e){Object(O.a)(s,e);var t=Object(g.a)(s);function s(){var e;return Object(v.a)(this,s),(e=t.call(this)).state={items:Array.from({length:5}),videos:[],limit:5},e.fetchMoreData=function(){setTimeout((function(){e.getSearched(),e.setState({items:e.state.items.concat(Array.from({length:5}))})}),1500)},e}return Object(f.a)(s,[{key:"componentDidMount",value:function(){this.getSearched()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.id;if(e.id!==this.props.id){var s="https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=".concat(this.props.id,"&type=video&key=").concat("AIzaSyB3G7-i8z2NTRw0zVzNx0_79vDqIuHXwc0","&maxResults=20&pageToken=CBQQAA");fetch(s).then((function(e){return e.json()})).then((function(e){t.setState({videos:e.items})}))}}},{key:"getSearched",value:function(){var e=Object(x.a)(b.a.mark((function e(){var t,s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"AIzaSyB3G7-i8z2NTRw0zVzNx0_79vDqIuHXwc0",t="https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=".concat(this.props.id,"&type=video&key=").concat("AIzaSyB3G7-i8z2NTRw0zVzNx0_79vDqIuHXwc0","&maxResults=20&pageToken=CBQQAA"),e.next=5,fetch(t);case 5:return s=e.sent,e.next=8,s.json();case 8:return n=e.sent,this.setState({videos:n.items,limit:this.state.limit+5}),e.abrupt("return",n.items);case 13:e.prev=13,e.t0=e.catch(0),console.log("Failed to fetch",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Related Videos"}),Object(l.jsx)(y.a,{className:"w-full flex flex-col",dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.limit<50,loader:Object(l.jsx)("h4",{children:"Loading..."}),children:this.state.videos&&this.state.videos.map((function(e,t){return Object(l.jsx)(w,{video:e},t)}))})]})}}]),s}(c.a.Component);function I(e){return Object(l.jsx)(r.b,{to:"/",className:"p-2 text-white bg-blue-300 font-semibold text-primary border border-primary mx-2 hover:bg-blue-400 hover:text-white",children:"Go back"})}function D(e){var t=e.match.params.video,s=Object(n.useState)(!1),c=Object(d.a)(s,2),i=c[0],a=c[1];return Object(l.jsxs)("div",{className:"flex justify-center items-center flex-col",children:[Object(l.jsx)(m,{setQuery:a}),i&&Object(l.jsx)(o.a,{to:{pathname:"/",state:{activeQuery:i}}}),Object(l.jsx)(I,{}),Object(l.jsxs)("div",{className:"single-page-container w-11/12",children:[Object(l.jsx)(z,{video:e.location.state.video}),Object(l.jsx)(A,{id:t})]})]})}var T=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(r.a,{children:[Object(l.jsx)(u,{}),Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{path:"/",exact:!0,component:S}),Object(l.jsx)(o.b,{path:"/video/:video",exact:!0,component:D})]})]})})};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.fb2e61d4.chunk.js.map